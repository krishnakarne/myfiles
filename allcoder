import { Component, OnInit } from '@angular/core';
import { Router } from '@angular/router';
import { TokenService } from '../services/token.service';

@Component({
  selector: 'app-empty',
  standalone: true,
  templateUrl: './empty.component.html',
  styleUrls: ['./empty.component.scss']
})
export class EmptyComponent implements OnInit {
  constructor(
    private router: Router,
    private tokenService: TokenService
  ) {}

  ngOnInit(): void {
    const url = new URL(window.location.href);
    const token = url.searchParams.get('token');

    if (token && token.trim() !== '') {
      this.tokenService.setToken(token);
      this.router.navigateByUrl(localStorage.getItem('path') || '/home'); // Navigate to the stored path or home
    } else {
      console.warn('No token found or token is invalid.');
      this.router.navigateByUrl('/login');
    }
  }
}
